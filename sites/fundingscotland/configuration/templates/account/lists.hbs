<div id="detailed-results-container" class="container-content lists fundingscotland-lists">
  <h1 class="mdc-typography--headline3 v-margin-full">
    Lists
  </h1>

  <div class="mdc-theme--primary-light-bg mdc-theme--on-primary-light x-padding-full mdc-theme--primary-border border rounded b-margin-full">
    <p>
      <i class="fas fa-info-circle fa-fw"></i>
      You can use lists to organise funds you are interested in. Lists can then be downloaded as a full report of each fund 
      (including any notes you have made) as a PDF. You can also subscribe to receive email updates about any changes to 
      funds in each of your lists.
    </p>
  </div>

  <div class="mdc-list-group mdc-theme--secondary-border border rounded">
    <ul class="mdc-list mdc-list--two-line mdc-list--avatar-list">
      {{#if (any @root.data.shortlistPartitions.items.[0])}}
        {{#each @root.data.shortlistPartitions.items.[0]}}
          <li class="mdc-list-item" {{#if first}}tabindex="0"{{/if}} data-list-name="{{partition}}">
            <span class="mdc-list-item__graphic mdc-theme--primary-bg mdc-theme--on-primary mdc-list-item__graphic-counter">
              {{length (filter (arrayify (getProperty (querystring querystring) "id")) null "valueIn" (pluck @root.data.primaryResponse.hits.hits "_id"))}}
            </span>
            <span class="mdc-list-item__text">
              <span class="mdc-list-item__primary-text">
                <a href="/view-list/{{partition}}">{{partition}}</a>
              </span>
              <span class="mdc-list-item__secondary-text">
                <span class="r-margin-full">
                  <a href="/download-list/{{partition}}">Download as PDF</a>
                </span>
                <span class="r-margin-full">
                  <a class="mdc-theme--error pointer" role="button" data-delete-list="{{partition}}">Delete list</a>
                </span>
              </span>
            </span>
            <span class="mdc-list-item__meta">
              <div class="mdc-chip-set">
                {{#> ajax_chip
                  onUrl=(concat "/toggle-list-subscription?name=" partition)
                  offUrl=(concat "/toggle-list-subscription?name=" partition)
                  onText="Email alerts"
                  offText="Email alerts"
                  iconClasses="far fa-envelope"
                  on=partitionActive
                }}
                {
                  "extraAttributes": "data-fund-id=\"{{../partition}}\"",
                  "onClasses": {
                    "[data-fund-id=\"{{../partition}}\"] .mdc-chip__icon": "mdc-chip__icon--leading-hidden"
                  },
                  "offClasses": {
                    "[data-fund-id=\"{{../partition}}\"]": ""
                  }
                }
                {{/ajax_chip}}
              </div>
            </span>
          </li>
          {{/each}}
        {{else}}
        <li class="mdc-list-item" {{#if first}}tabindex="0"{{/if}} data-list-name="{{partition}}">
          <span class="mdc-list-item__text">
            <span class="mdc-list-item__primary-text">
              You haven't created any lists
            </span>
            <span class="mdc-list-item__secondary-text">
              To create a list: click on the "Lists" tab on a fund you would like to save, enter a name, and then click "Create list".
            </span>
          </span>
        </li>
        {{/if}}
    </ul>
  </div>
</div>