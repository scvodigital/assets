<div class="container-content content-hours">
  <h1 class="mdc-typography--headline4">
    Add a task
  </h1>

  <h2 class="mdc-typography--headline6">
    Task details
  </h2>

  <form id="task-details-form" action="/submit-task-details" method="POST" data-ajax-form='{
      "successCallback": "completeCB",
      "failureCallback": "completeCB"
    }'>
    <div class="mdc-layout-grid">
      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-text-field mdc-text-field--box" data-mdc-auto-init="MDCTextField">
            <input id="task_name" name="task_name"
              {{>form_validation_attributes @root.context.metaData.taskInfoValidation.task_name}}
                   class="mdc-text-field__input mdc-text-field--fullwidth"
                   value = "{{@root.data.taskInfo.task_name}}"
            >
            {{!-- value="{{@root.data.user_details.name}}"> --}}
            <label class="mdc-floating-label" for="task_name">
              Task name, or brief description
            </label>
          </div>
        </div>
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-text-field mdc-text-field--box" data-mdc-auto-init="MDCTextField">
            <input required id="location" name="location"
              {{>form_validation_attributes @root.context.metaData.taskInfoValidation.location}}
                   class="mdc-text-field__input mdc-text-field--fullwidth"
                   value = "{{@root.data.taskInfo.location}}">

            <label class="mdc-floating-label" for="location">
              Location
            </label>
          </div>
        </div>
      </div>
      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-text-field mdc-text-field--box" data-mdc-auto-init="MDCTextField">
            <input id="organisation_name" name="organisation_name"
              {{>form_validation_attributes @root.context.metaData.taskInfoValidation.organisation_name}} class="mdc-text-field__input mdc-text-field--fullwidth"
                   value = "{{@root.data.taskInfo.organisation_name}}">
            <label class="mdc-floating-label" for="organisation_name">
              Organisation you volunteer for
            </label>
          </div>
        </div>
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-text-field mdc-text-field--box" data-mdc-auto-init="MDCTextField">
            <input autocomplete="off" id="organisation_charity_number" name="organisation_charity_number"
              {{>form_validation_attributes @root.context.metaData.taskInfoValidation.organisation_charity_number}}
                   class="mdc-text-field__input mdc-text-field--fullwidth"
                   value = "{{@root.data.taskInfo.organisation_charity_number}}">
            <label class="mdc-floating-label" for="organisation_charity_number">
              Organisation Scottish Charity Number (optional, e.g. SC012345)
            </label>
          </div>
        </div>
      </div>
      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-typography--headline6">
            Details of the person who manages this Volunteering Task
          </div>
        </div>
      </div>

      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-text-field mdc-text-field--box" data-mdc-auto-init="MDCTextField">
            <input required id="volunteer_manager_name" name="volunteer_manager_name"
              {{>form_validation_attributes @root.context.metaData.taskInfoValidation.volunteer_manager_name}}
                   class="mdc-text-field__input mdc-text-field--fullwidth"
                   value = "{{@root.data.taskInfo.volunteer_manager_name}}"
            >
            <label class="mdc-floating-label" for="name">
              Name
            </label>
          </div>
        </div>
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-text-field mdc-text-field--box" data-mdc-auto-init="MDCTextField">
            <input required id="volunteer_manager_title" name="volunteer_manager_title"
              {{>form_validation_attributes @root.context.metaData.taskInfoValidation.volunteer_manager_title}}
                   class="mdc-text-field__input mdc-text-field--fullwidth"
                   value = "{{@root.data.taskInfo.volunteer_manager_title}}"
            >
            <label class="mdc-floating-label" for="name">
              Job title
            </label>
          </div>
        </div>
      </div>

      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-text-field mdc-text-field--box" data-mdc-auto-init="MDCTextField">
            <input id="volunteer_manager_email" name="volunteer_manager_email"
              {{>form_validation_attributes @root.context.metaData.taskInfoValidation.volunteer_manager_email}} class="mdc-text-field__input mdc-text-field--fullwidth"
                   value = "{{@root.data.taskInfo.volunteer_manager_email}}">
            <label class="mdc-floating-label" for="volunteer_manager_email">
              E-Mail address
            </label>
          </div>
        </div>

        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-text-field mdc-text-field--box" data-mdc-auto-init="MDCTextField">
            <input id="volunteer_manager_phone" name="volunteer_manager_phone"
              {{>form_validation_attributes @root.context.metaData.taskInfoValidation.volunteer_manager_phone}} class="mdc-text-field__input mdc-text-field--fullwidth"
                   value = "{{@root.data.taskInfo.volunteer_manager_phone}}">
            <label class="mdc-floating-label" for="volunteer_manager_phone">
              Phone number (Optional)
            </label>
          </div>
        </div>
      </div>

      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
          <div class="mdc-select pull-right mdc-elevation--z2" data-mdc-auto-init="MDCSelect">
            <span class="mdc-select__dropdown-icon"></span>
            <select class="mdc-select__native-control" id="sort" name="un_sustainable_development_goals">
              <option value="" selected></option>
              <option value="Good Health and Well-being">Good Health and Well-being</option>
              <option value="Reducing Inequality">Reducing inequality</option>
            </select>
            <label class="mdc-floating-label mdc-select__label--float-above" for="sort">
              Which UN Sustainable Development Goal does this task match?
            </label>
            <div class="mdc-line-ripple"></div>
          </div>
        </div>
      </div>

    </div>
    {{!-- This will probably have a captcha in it, hence the separation, and weird submit format --}}
    <button id="detail-submit" type="submit" class="mdc-button mdc-button--raised b-margin-full" id="register-interest-submit" >
      <span class="icon far fa-hand-paper mdc-list-item__graphic" aria-hidden="true"></span>
      <span class="spinner fas fa-spin fa-spinner mdc-list-item__graphic" aria-hidden="true"></span>
      Submit Details
    </button>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    $('#task-details-form').on('submit', function(e){
      $('#detail-submit').prop('disabled', true);
    })
  });
  function completeCB(response){
    var jsonData = JSON.parse(response);
    if (jsonData.id){
      window.location.href = '/hours/';
    } else {
      $('#detail-submit').prop('disabled', false);
      saltireawards.componentsInitialiser.snackbar.show({message:"Failed create task."});
    }
  }
</script>
{{!--
--}}
{{!-- <script src="https://www.google.com/recaptcha/api.js" async defer></script> --}}
